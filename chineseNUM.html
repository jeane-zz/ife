<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>中文数字序列</title>
</head>
<body>
	请输入一个数字（小数点后最多9位） ： <input type="num" name="num" id="input">

	<button>确定</button>

	<p id="output"></p>

	<script type="text/javascript">
		var input = document.querySelector('#input')
		var btn = document.querySelector('button')
		var output = document.querySelector('#output')

		btn.addEventListener('click', function(){
			if(Number.isNaN(Number(input.value))){
				output.innerHTML = '输入的数据有误'
			}else {
				output.innerHTML =  DX(Number(input.value)) + "  " + transToChineseNum(Number(input.value))
			}
		})

		function transToChineseNum(n) {
			if(!/^(0|[1-9]\d*)(\.\d+)?$/.test(n)){
				return '数据非法'
			}
			// var unit = '千百拾亿千百拾万千百拾个分厘毫丝忽微纤沙尘'
			var unit = '千百拾亿千百拾万千百拾个分厘'
			var str = ''
			n += '00'
			var p = n.indexOf('.')
			if(p >= 0){
				n = n.substring(0, p) + n.substr(p + 1, 2)
			}
			unit = unit.substr(unit.length - n.length)
			for(var i = 0; i < n.length; i++){
				str += '零一二三四五六七八九'.charAt(n.charAt(i)) + unit.charAt(i)
			}
			return str.replace(/零(千|百|拾|分)/g,"零")
					  .replace(/(零)+/g,"零")
					  .replace(/零(万|亿|个)/g,"$1")
					  .replace(/(亿)万|一(拾)/g,"$1$2")
					  .replace(/^个零?|零厘/g,"")
					  .replace(/个$/g, "")
		}


		function DX(n) {
        if (!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))
            return "数据非法";
        var unit = "千百拾亿千百拾万千百拾元角分", str = "";
            n += "00";
        var p = n.indexOf('.');
        if (p >= 0)
            n = n.substring(0, p) + n.substr(p+1, 2);
            unit = unit.substr(unit.length - n.length);
        for (var i=0; i < n.length; i++)
            str += '零壹贰叁肆伍陆柒捌玖'.charAt(n.charAt(i)) + unit.charAt(i);
        return str.replace(/零(千|百|拾|角)/g, "零").replace(/(零)+/g, "零").replace(/零(万|亿|元)/g, "$1").replace(/(亿)万|壹(拾)/g, "$1$2").replace(/^元零?|零分/g, "").replace(/元$/g, "元整");
}
	</script>
</body>
</html>